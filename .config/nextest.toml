# .config/nextest.toml
[profile.default]
# Kill any test once it crosses 60s.
slow-timeout = { period = "60s", terminate-after = 1, grace-period = "5s" }

# Put a hard ceiling on the whole run.
global-timeout = "10m"

# Embedded Postgres test binaries share the default pg-embed install/data paths
# (`/var/tmp/pg-embed-<uid>/{install,data}`), which are not safe to set up in
# parallel. Nextest runs integration test binaries concurrently, so we group
# those suites and run them serially.
[test-groups.pg-embedded]
max-threads = 1

[[profile.default.overrides]]
filter = "binary(diesel_user_repository) | binary(ports_behaviour)"
test-group = "pg-embedded"
