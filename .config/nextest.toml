# .config/nextest.toml
[profile.default]
# Kill any test once it crosses 60s, unless overridden for slower suites.
slow-timeout = { period = "60s", terminate-after = 1, grace-period = "5s" }

# Put a hard ceiling on the whole run.
global-timeout = "60m"

# Embedded Postgres test binaries are heavier than pure unit tests due to
# database lifecycle and migration work. Reserve more scheduler capacity per
# test to keep host and CI runs balanced without a fixed per-group cap.

[[profile.default.overrides]]
filter = """
  binary(diesel_user_repository)
  | binary(diesel_user_preferences_repository)
  | binary(diesel_route_annotation_repository)
  | binary(diesel_example_data_runs_repository)
  | binary(er_snapshots_bdd)
  | binary(example_data_seeding_bdd)
  | binary(example_data_runs_bdd)
  | binary(ports_behaviour)
  | binary(pg_embed_isolation)
  | binary(schema_baseline_bdd)
"""
threads-required = 2
slow-timeout = { period = "360s", terminate-after = 1, grace-period = "5s" }
